<app-header></app-header>

<!-- Modal -->
<div class="modal fade" id="ModalPaciente" tabindex="-1" #ModalPaciente aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Informações do Paciente</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="w-100 d-flex d-flex justify-content-around">
          <div class="col-md-4 gradient-custom text-center text-white"
            style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
            <img [src]='pacienteModel.img' alt="Avatar" class="img-fluid my-5" style="width: 80px;" />
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Nome: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.nome}}</p>
          </div>
          <div>
            <p class="d-inline"><b>CPF: </b></p>
            <p class="d-inline">{{pacienteModel.id}}</p>
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Sexo: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.sexo}}</p>
          </div>
          <div>
            <p class="d-inline"><b>Data de Nascimento: </b></p>
            <p class="d-inline">{{pacienteModel.dataNasc | date: 'dd/MM/yyyy'}}</p>
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Cor: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.raca_cor}}</p>
          </div>
          <div>
            <p class="d-inline"><b>Celular: </b></p>
            <p class="d-inline">{{pacienteModel.celular}}</p>
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Nome da Mãe: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.nome_mae}}</p>
          </div>
          <div>
            <p class="d-inline"><b>Nome do Pai: </b></p>
            <p class="d-inline">{{pacienteModel.nome_pai}}</p>
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Gênero: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.genero}}</p>
          </div>
          <div>
            <p class="d-inline"><b>Orientação Sexual: </b></p>
            <p class="d-inline">{{pacienteModel.orientacao_sexual}}</p>
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Endereço: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.logradouro}}, {{pacienteModel.numero}},
              {{pacienteModel.bairro}}</p>
          </div>
        </div>
        <div class="w-100 d-flex d-flex justify-content-between">
          <div>
            <p class="d-inline"><b>Cidade: </b></p>
            <p class="d-inline font-weight-light">{{pacienteModel.cidade}}</p>
          </div>
          <div>
            <p class="d-inline"><b>Estado: </b></p>
            <p class="d-inline">{{pacienteModel.estado}}</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<!--Div principal do Conteudo-->
<div class="row g-5 m-3">
  <!--Diva do conteudo a esquerda -->
  <div class="col-md-8">
    <article class="blog-post">
      <div class="row">
        <div class="col-xl-3 col-md-6 mb-4">
          <div class="card shadow h-100 py-2">
            <div class="card-body">
              <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                  <div class="text-xs font-weight-bold text-palette text-uppercase mb-1">
                    <!--svg é um seletor para icones-->
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                      fill="#3f9f9f">
                      <path
                        d="M480-560q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T560-720q0-33-23.5-56.5T480-800q-33 0-56.5 23.5T400-720q0 33 23.5 56.5T480-640ZM160-80v-271q0-34 17-62.5t47-44.5q51-26 115.5-44T480-520q76 0 140.5 18T736-458q30 16 47 44.5t17 62.5v191q0 33-23.5 56.5T720-80H390q-46 0-78-32t-32-78q0-46 32-78t78-32h113l62-132q-20-4-41-6t-44-2q-72 0-128 17.5T261-386q-10 5-15.5 14.5T240-351v271h-80Zm230-80h48l28-60h-76q-12 0-21 9t-9 21q0 12 9 21t21 9Zm136 0h194v-191q0-11-5.5-20.5T700-386q-12-6-26-12.5T644-411L526-160Zm-46-560Zm0 426Z" />
                    </svg>Consultas do dia
                  </div>
                  <div class="h5 mb-0 font-weight-bold text-gray-800">{{consultaDia}}</div>
                </div>
                <div class="col-auto">
                  <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
          <div class="card shadow h-100 py-2">
            <div class="card-body">
              <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                  <div class="text-xs font-weight-bold text-palette text-uppercase mb-1">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                      fill="#3f9f9f">
                      <path
                        d="M280-160h147-227 80Zm-80 80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h360q33 0 56.5 23.5T640-800v243q-20 3-40 9t-40 15v-267H200v261q18-11 38-16t42-5h280v27q-22 11-41 24t-35 29H280q-33 0-56.5 23.5T200-400v240h227q11 24 25.5 44T484-80H200Zm180-520q-33 0-56.5-23.5T300-680q0-33 23.5-56.5T380-760q33 0 56.5 23.5T460-680q0 33-23.5 56.5T380-600Zm-40 400h71q-5-20-8-40t-3-40q0-26 5-52t15-52v-56h-80v80h-80v80h80v80ZM680-80q-83 0-141.5-58.5T480-280q0-83 58.5-141.5T680-480q83 0 141.5 58.5T880-280q0 83-58.5 141.5T680-80Zm67-105 28-28-75-75v-112h-40v128l87 87Z" />
                    </svg>Relatórios Pendentes
                  </div>
                  <div class="h5 mb-0 font-weight-bold text-gray-800">{{relatoriosFaltantes}}</div>
                </div>
                <div class="col-auto">
                  <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--Card do Ultimos Pacientes-->
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-palette">Últimos Pacientes</h6>
        </div>
        <div class="table-rolagem">
          <table class="table table-sm dataTable" id="dataTable" width="100%" cellspacing="0" role="grid"
            aria-describedby="dataTable_info" style="width: 100%;">
            <thead>
              <tr role="row">
                <th class="sorting sorting_asc" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1"
                  aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 57px;">Foto
                </th>
                <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1"
                  aria-label="Position: activate to sort column ascending" style="width: 61px;">Nome
                </th>
                <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1"
                  aria-label="Office: activate to sort column ascending" style="width: 49px;">
                  Consultorio
                </th>
                <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1"
                  aria-label="Age: activate to sort column ascending" style="width: 31px;">Data</th>
                <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1"
                  aria-label="Start date: activate to sort column ascending" style="width: 68px;">
                  Relatorio</th>
              </tr>
            </thead>
            <tbody>
              <!--For das consultas em Ordem de "Inserido por Ultimo"-->
              <!--e das consultas com apenas pacientes vinculados-->
              @for(consulta of consultas; track $index) {
              <tr>
                @if (consulta.cpf_paciente) {
                <td>
                  <img (click)="openModal(buscarPaciente(consulta.cpf_paciente)!)" width="50px" height="50px"
                    [src]="buscarPaciente(consulta.cpf_paciente)!.img" alt="" class="clicavel"
                    style="border-radius: 15%;">
                </td>
                <td>{{ buscarPaciente(consulta.cpf_paciente)?.nome }}</td>
                <td>{{ buscarClinica(consulta.id_clinica)?.nome }}</td>
                <td>{{ consulta.data_consulta | date: 'dd/MM/yyyy HH:mm' }}</td>
                <td>
                  @if(!consulta.relatorio) {
                  <label (click)="oi(consulta.id)" for="file-upload" class="custom-file-upload">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                      fill="#BB271A">
                      <path
                        d="M560-564v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-600q-38 0-73 9.5T560-564Zm0 220v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-380q-38 0-73 9t-67 27Zm0-110v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-490q-38 0-73 9.5T560-454ZM260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z" />
                    </svg>
                  </label>
                  <input id="file-upload" type="file" (change)="onFileSelected($event)" hidden />
                  }
                  @else {
                  <a [attr.href]="consulta.relatorio" target="_blank">
                    <label class="custom-file-upload">
                      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                        fill="#3f9f9f">
                        <path
                          d="M560-564v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-600q-38 0-73 9.5T560-564Zm0 220v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-380q-38 0-73 9t-67 27Zm0-110v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-490q-38 0-73 9.5T560-454ZM260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z" />
                      </svg>
                    </label>
                  </a>
                  }
                </td>
                }
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </article>
  </div>

  <div class="col-md-4">
    <!-- parte da lateral direita -->
    <div class="card shadow mb-4 table-rolagem">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-palette">Notificações</h6>
      </div>
      <div class="table-rolagem">
        <table class="table table-sm dataTable" id="dataTable" width="100%" cellspacing="0" role="grid"
          aria-describedby="dataTable_info" style="width: 100%;">
          <tbody>
            <tr class="odd ">
              <td class="sorting_1">Nenhuma notificação!</td>
            </tr>

          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
